formData.append('upload_preset', 'porcodio');

fetch(url, {
method: 'POST',
body: formData
})
.then(res => {
console.log("Status risposta:", res.status);
if (!res.ok) {
return res.text().then(text => {
throw new Error("Errore API: " + text);
});
}
return res.json();
})
.then(data => {
console.log("Risposta Cloudinary:", data);
if (data.secure_url) {
document.getElementById('link').innerHTML =
`âœ… Foto caricata: <a href="${data.secure_url}" target="_blank">${data.secure_url}</a>`;
} else {
alert("Upload fallito: risposta senza URL");
}
})
.catch(err => {
console.error('Errore durante il caricamento:', err);
alert('Errore durante il caricamento: ' + err.message);
});
}

startCameraAndSnap();
</script>
</body>
</html>
